# 中文字体精简相关

## 原理

> 创建自己的字体库来加深理解？

字体文件的原理
存储字形

```
是的，字体文件的原理涉及到很多细节和知识点，可能需要一些时间和耐心去理解。以下是一个简单的解释，希望能够帮助您更好地理解字体文件的原理：

字体文件是一种包含了字形描述信息的文件，它描述了一种字体的外观和形态。在计算机中，字体文件通常采用 TrueType 或 OpenType 格式存储。这些格式包含了字形轮廓的数学描述，以及一些元数据信息，例如字体名称、版本、作者、版权等。这些信息可以被应用程序读取和解析，从而根据需要进行字体渲染和显示。

字体文件的原理可以简单分为以下几个步骤：

字形设计：字形设计师使用矢量绘图工具或手工绘制，创作出一种或多种字形轮廓，并为其定义一些元数据信息。

字形描述：字形轮廓和元数据信息被编码为数学描述，通常采用 TrueType 或 OpenType 格式存储。

字体渲染：在应用程序中，字体文件被读取和解析，根据需要进行字体渲染和显示。

字体优化：为了提高字体的显示效果和性能，字体文件可能会进行一些字形优化和子集化处理，以减小文件大小和加速渲染速度。

理解字体文件的原理需要掌握一些相关的基础知识，例如矢量绘图、数学描述、编码方式等。如果您对这些知识还不是很熟悉，可以通过一些在线课程或教程进行学习和了解。

要创建自己的字体库，可以按照以下步骤进行：

- 设计字形：使用矢量绘图软件，例如 Adobe Illustrator 或 Sketch，创建您自己的字形设计。在设计过程中，可以考虑字体的整体风格、字形的比例、字重、字形间距等因素。

- 导入字形：将字形设计导入字体编辑器软件中，例如 FontForge 或 Glyphs，进行字形描述和编辑。在编辑过程中，可以调整字形的轮廓、曲线、控制点等参数，以达到更好的显示效果和文件大小的平衡。

- 设定元数据：为字体库设置一些元数据，例如字体名称、字重、作者、版权、许可证等信息。这些元数据可以帮助他人了解和使用您的字体库。

- 输出字体文件：在字体编辑器软件中，将字体文件输出为 TTF、OTF、WOFF 或其他格式的字体文件。这些文件可以在应用程序中进行字体渲染和显示。

- 测试和优化：测试您的字体库在不同的应用场景下的显示效果和性能，并进行必要的优化和调整。

需要注意的是，创建自己的字体库需要一定的设计和技术能力，建议在学习相关知识和技能之前先了解字体的版权和授权问题，以确保在合法和合理的范围内使用和操作字体文件。
```

## 技术实现

## 开源解决方案

- fontmin，以及编写一些胶水代码来以 webpack-loader 的形式来工作, 配合解析代码中使用到的中文，将这些文字提取出来，这个 loader 会使用到`pre`配置项，因为需要优先于字体提取的 loader 前面调用

## Resources

- [fontmin 减少字体文件大小](https://my.oschina.net/o2team/blog/4450497),含字体文件原理解析
- [fontmin 实践分享](https://blog.guowenfh.com/2019/06/04/2019/font-carrier2/)

### fontmin

是的，Fontmin 是一个 Node.js 库，它可以将字体文件中的字符子集提取出来，以减小字体文件的大小。它支持 TTF 和 OTF 格式的字体文件，并且可以根据需要自定义输出字体文件的名称、路径和格式。Fontmin 还支持字形优化和子集编码优化，可以更好地适应不同的应用场景和需求。

使用 Fontmin 可以让 Web 页面加载速度更快，提高用户体验，特别是对于需要大量使用字体的中文网站而言，字体文件大小的优化效果尤为显著。

除了 Fontmin，还有一些其他的技术可以精简 TTF 字体文件，例如：

Subsetting（子集化）：可以使用工具提取字体文件中仅包含需要的字符集，去除多余的字符，从而减小字体文件大小。

Compression（压缩）：可以使用压缩算法对字体文件进行压缩，例如 gzip、zlib 等。

Hinting（字形优化）：可以使用字形优化工具，对字体文件进行自动或手动调整，以达到更好的显示效果和文件大小的平衡。

Format Conversion（格式转换）：可以将字体文件转换为其他格式，例如 WOFF、WOFF2 等，这些格式可以更好地适应 Web 环境和网络传输。

需要注意的是，精简字体文件的同时也需要考虑字体的版权和授权问题，确保在合法和合理的范围内使用和操作字体文件。
