# 额外零散的 Tips

## 类型增强

- 在 `TypeScript` 中，如果文件包含顶层的 `export` 或者 `import`，则会被当作 `module`，**在 `module` 中定义的、没有显式 `export` 的变量、函数、类对外都不可见**；
- 相反，如果文件不包含顶层的 `export` 或者 `import`，则会被当作 `script`，**`script` 里的内容（类型声明、变量声明）都是全局可见的（对 `module` 也是可见的）**。

> 这就是为什么使用同样的语法进行人工补齐类型声明时，有的类型声明在其他的模块、文件中无需显式`import`就可以直接使用，而有的类型声明必须显式`import`之后才可以使用。

> 需要注意：因为`script`中的内容都是全局可见的，一方面我们应该避免定义过多全局类型，另一方面也要使用足够特性化的唯一标识来命名全局类型，从而避免全局命名污染。
### 特殊化标识
- `namespace`命名空间
```ts
// 使用namespace控制可见性
// myAugmention.ts
namespace MyNameSpaceExample {
// namespace 中只有显式 export 的成员才对外可见
  export type id = number; // 此处非顶层 export
  export type name = string;
}
type TSCourseUserInfoName = string; // 较特异性的变量
```

- `declare global`
```ts
//在`module`使用`declare global`声明全局类型
declare global {
  type GlobalUserId = number;
}
```

### 备注

**此外，为了避免其他人在`myAugmention.ts`中添加顶层`export`或者`import`，导致`script`变`module`、类型全局可见性被破坏，我们可以显式添加描述信息，比如标明“`script`文件，请勿添加顶层`export`或者`import`”。反过来，我们也可以在`script`中添加“`export {}`”，显式地把`script`改为`module`，避免类型全局污染**。