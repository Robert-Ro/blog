# 10 ｜函数组件设计模式：如何应对复杂条件渲染场景.pdf

> 所谓设计模式，就是针对特定场景，提供一种公认的最佳实践。在前面的课程中，我们已经提到了不少模式，比如保证状态的唯一数据源，语义化的拆分复杂组件，等等。熟练掌握这些模式，可以让我们的代码更加简洁直观。

1. 一个和 `Hooks` 相关，用于解决 `Hooks` 无法在条件语句中执行带来的一些难题；
2. 另一个则是经典的 `render props` 模式，用于实现 `UI` 逻辑的重用。

## 容器模式：实现按条件执行 `Hooks`

如果在当前函数中添加条件判断的话，会触发`eslint-react-hooks`相关的校验错误，且 `React Hooks` 只能在顶级作用域使用，而不能放在**条件判断**、**循环**等语句中，同时也不能在可能的 `return` 语句之后执行。换句话说，`Hooks` 必须按顺序被执行到

> 原理：`hooks`链式数据结构。

具体做法就是**把条件判断的结果放到两个组件之中，确保真正 `render UI` 的组件收到的所有属性都是有值的**。

```js
// 定义一个容器组件用于封装真正的 UserInfoModal
export default function UserInfoModalWrapper({
  visible,
  ...rest // 使用 rest 获取除了 visible 之外的属性
}) {
  // 如果对话框不显示，则不 render 任何内容
  if (!visible) return null
  // 否则真正执行对话框的组件逻辑
  return (
    <UserInfoModal
      visible
      {...rest}
    />
  )
}
```

> NOTE 写一个 `hooks`，接收参数，返回倒计时，当条件为 `true` 开始倒计时
